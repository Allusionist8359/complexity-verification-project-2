/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
plugins {
  //id "org.sonarqube" version "2.7"
  id 'org.checkerframework' version '0.6.9'
}

apply plugin: 'java'
apply plugin: 'org.checkerframework'

repositories {
  mavenCentral()
}

dependencies {
  implementation fileTree(include: ['*.jar'], dir: 'libs')
  implementation group: 'org.eclipse.emf', name: 'org.eclipse.emf.common', version: '2.16.0'
  implementation group: 'org.eclipse.emf', name: 'org.eclipse.emf.ecore.xmi', version: '2.16.0'
}

compileJava.options.encoding = 'UTF-8'

checkerFramework {
    //List all checkers in use here
    checkers = [
        'org.checkerframework.checker.nullness.NullnessChecker',
        'org.checkerframework.checker.interning.InterningChecker',
        'org.checkerframework.checker.calledmethods.CalledMethodsChecker',
        'org.checkerframework.checker.resourceleak.ResourceLeakChecker',
        'org.checkerframework.checker.index.IndexChecker',
        'org.checkerframework.checker.signature.SignatureChecker',
        'org.checkerframework.common.value.ValueChecker',
        'org.checkerframework.common.aliasing.AliasingChecker',
        'org.checkerframework.checker.optional.OptionalChecker',
        'org.checkerframework.checker.regex.RegexChecker',
        'org.checkerframework.checker.formatter.FormatterChecker',
        //'org.checkerframework.checker.tainting.TaintingChecker'
    ]

    extraJavacArgs = [
        '-Awarns',              //Converts the checker framework errors to warnings
        '-Xmaxwarns', '10000'   //Increases # of shown warnings
        //'-Anomsgtext'
        //'-Ashowchecks'
        //'-Adetailedmsgtext'
    ]
}

task printClasspath {
    println "${sourceSets.main.compileClasspath.asPath}"
}
